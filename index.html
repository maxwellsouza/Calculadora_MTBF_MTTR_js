<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MTBF, MTTR e Disponibilidade • Calculadoras Técnicas</title>

    <!-- Fonte + CSS -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />

    <!-- Font Awesome Free 6.5.1 (SRI OK) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Grid.js via CDN (UMD global: window.gridjs) -->
    <link
      href="https://cdn.jsdelivr.net/npm/gridjs/dist/theme/mermaid.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/gridjs/dist/gridjs.umd.js"></script>
  </head>
  <body>
    <!-- Brand bar -->
    <div class="brandbar">
      <div class="brandbar-inner">
        <div class="brand-logo">
          <span class="mark" aria-hidden="true"></span>
          <span>Confiabilidade &amp; Manutenção</span>
        </div>

        <div class="brand-actions">
          <!-- Alternância apenas LIGHT/DARK (se seu JS ainda ciclar 'auto', o auto ficará visualmente igual ao LIGHT) -->
          <button
            id="btnTheme"
            class="ghost small btn-icon"
            title="Alternar tema (Claro/Escuro)"
          >
            <i class="fa-solid fa-moon"></i
            ><span class="sr-only">Alternar tema</span>
          </button>
        </div>
      </div>
    </div>

    <header class="app-header">
      <div class="app-header-inner">
        <h1 class="app-title">
          Confiabilidade Operacional: MTBF, MTTR e Disponibilidade
        </h1>
        <p class="subtitle">
          Ferramentas interativas para cálculos de MTBF, MTTR e Disponibilidade.
        </p>
      </div>
    </header>

    <main class="container">
      <!-- Abas fixas -->
      <section class="switcher sticky" role="tablist" aria-label="Calculadoras">
        <div class="tab-row">
          <button
            id="btnIntro"
            class="tab-btn active"
            aria-pressed="true"
            role="tab"
          >
            <i class="fa-solid fa-book-open"></i> Introdução
          </button>
          <button id="btnMTBF" class="tab-btn" aria-pressed="false" role="tab">
            <i class="fa-solid fa-hourglass-half"></i> MTBF
          </button>
          <button id="btnMTTR" class="tab-btn" aria-pressed="false" role="tab">
            <i class="fa-solid fa-screwdriver-wrench"></i> MTTR
          </button>
          <button
            id="btnAvailability"
            class="tab-btn"
            aria-pressed="false"
            role="tab"
          >
            <i class="fa-solid fa-chart-line"></i> Disponibilidade
          </button>
        </div>
      </section>

      <section class="panel" aria-live="polite">
        <!-- Texto dinâmico -->
        <div id="dynamicText" class="panel-text" role="region"></div>

        <!-- MTBF -->
        <div id="calcMTBF" class="calculator hidden" aria-hidden="true">
          <h3>Calculadora de MTBF</h3>

          <div class="grid">
            <label class="field">
              <span>Tempo de operação total <em>(horas ou hh:mm:ss)</em></span>
              <input
                id="mtbfTotal"
                placeholder="Ex.: 1200 ou 1:30:00"
                value="1200"
              />
            </label>
            <label class="field">
              <span>Nº de falhas</span>
              <input
                id="mtbfFailures"
                type="number"
                min="0"
                placeholder="Ex.: 6"
                value="6"
              />
            </label>
          </div>

          <div class="block">
            <div class="block-head">
              <strong>Lista de TBF (prioridade)</strong>
              <div class="row-actions">
                <button id="mtbfAddRow" class="ghost small" title="+ linha">
                  <i class="fa-solid fa-plus"></i> linha
                </button>
                <button id="mtbfClear" class="ghost small" title="limpar">
                  <i class="fa-solid fa-broom"></i> limpar
                </button>
              </div>
            </div>
            <div id="mtbfTable" class="table"></div>
            <p class="hint">
              Edite os TBFs diretamente no grid (aceita horas ou
              <code>hh:mm:ss</code>). Validação visual automática.
            </p>
          </div>

          <div class="actions">
            <button id="btnCalcMTBF" class="primary ripple">
              <i class="fa-solid fa-calculator"></i> Calcular MTBF
            </button>
          </div>

          <output id="mtbfResult" class="result" aria-live="polite"></output>
          <div id="mtbfNotes" class="notes"></div>
        </div>

        <!-- MTTR -->
        <div id="calcMTTR" class="calculator hidden" aria-hidden="true">
          <h3>Calculadora de MTTR</h3>

          <div class="grid">
            <label class="field">
              <span>Tempo total de reparo <em>(horas ou hh:mm:ss)</em></span>
              <input
                id="mttrTotal"
                placeholder="Ex.: 18.5 ou 2:15:00"
                value="18.5"
              />
            </label>
            <label class="field">
              <span>Nº de reparos</span>
              <input
                id="mttrRepairs"
                type="number"
                min="0"
                placeholder="Ex.: 6"
                value="6"
              />
            </label>
          </div>

          <div class="block">
            <div class="block-head">
              <strong>Tempos de reparo (prioridade)</strong>
              <div class="row-actions">
                <button id="mttrAddRow" class="ghost small" title="+ linha">
                  <i class="fa-solid fa-plus"></i> linha
                </button>
                <button id="mttrClear" class="ghost small" title="limpar">
                  <i class="fa-solid fa-broom"></i> limpar
                </button>
              </div>
            </div>
            <div id="mttrTable" class="table"></div>
            <p class="hint">
              Edite tempos diretamente no grid. Células inválidas são
              destacadas.
            </p>
          </div>

          <div class="actions">
            <button id="btnCalcMTTR" class="primary ripple">
              <i class="fa-solid fa-calculator"></i> Calcular MTTR
            </button>
          </div>

          <output id="mttrResult" class="result" aria-live="polite"></output>
          <div id="mttrNotes" class="notes"></div>
        </div>

        <!-- Disponibilidade -->
        <div id="calcAvailability" class="calculator hidden" aria-hidden="true">
          <h3>Calculadora de Disponibilidade</h3>

          <div class="grid">
            <label class="field">
              <span>MTBF <em>(horas ou hh:mm:ss)</em></span>
              <input
                id="avMTBF"
                placeholder="Ex.: 210 ou 3:30:00"
                value="210"
              />
            </label>
            <label class="field">
              <span>MTTR <em>(horas ou hh:mm:ss)</em></span>
              <input
                id="avMTTR"
                placeholder="Ex.: 3.2 ou 3:12:00"
                value="3.2"
              />
            </label>
          </div>

          <div class="actions">
            <button id="btnCalcAvailabilitySteady" class="primary ripple">
              <i class="fa-solid fa-square-root-variable"></i> Calcular
              Disponibilidade (estimada)
            </button>
          </div>

          <output
            id="availabilitySteadyResult"
            class="result"
            aria-live="polite"
          ></output>
          <div id="availabilitySteadyNotes" class="notes"></div>

          <hr class="separator" />

          <div class="grid">
            <label class="field">
              <span>Período observado <em>(horas ou hh:mm:ss)</em></span>
              <input
                id="periodTotal"
                placeholder="Ex.: 720 ou 168:00:00"
                value="720"
              />
            </label>
            <label class="field">
              <span>Downtime total (opcional)</span>
              <input
                id="periodDown"
                placeholder="Ex.: 12 ou 0:45:00"
                value="12"
              />
            </label>
          </div>

          <div class="block">
            <div class="block-head">
              <strong>Reparos no período (prioridade)</strong>
              <div class="row-actions">
                <button id="periodAddRow" class="ghost small" title="+ linha">
                  <i class="fa-solid fa-plus"></i> linha
                </button>
                <button id="periodClear" class="ghost small" title="limpar">
                  <i class="fa-solid fa-broom"></i> limpar
                </button>
              </div>
            </div>
            <div id="periodTable" class="table"></div>
            <p class="hint">
              Se houver dados no grid, eles terão prioridade sobre o downtime
              total único.
            </p>
          </div>

          <div class="grid">
            <label class="field">
              <span>Nº de falhas no período (opcional, para estimativa)</span>
              <input
                id="periodFailures"
                type="number"
                min="0"
                placeholder="Ex.: 8"
              />
            </label>
          </div>

          <div class="actions">
            <button id="btnCalcAvailabilityPeriod" class="primary ripple">
              <i class="fa-solid fa-percent"></i> Calcular disponibilidade do
              período
            </button>
          </div>

          <output
            id="availabilityPeriodResult"
            class="result"
            aria-live="polite"
          ></output>
          <div id="availabilityPeriodNotes" class="notes"></div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <p>© 2025 • Maxwell &amp; Souza</p>
    </footer>

    <!-- App (ESM) -->
    <script type="module" src="./copy-ptBR.js"></script>
    <script type="module" src="./src/main.js"></script>
  </body>
</html>
